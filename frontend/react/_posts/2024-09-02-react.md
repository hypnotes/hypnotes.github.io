---
layout: post
title: 02장 리액트 핵심 요소 깊게 살펴보기
description: >
  React Deep Dive
categories: javascript
accent_color: "#D0C8B6"
accent_image:
  background: "#E2DAD5"
theme_color: "#D0C8B6"
sitemap: false
permalink: /frontend/react/react
---

- add table of contents
  {:toc}

## 2.1 JSX란?

---

- JS 내부에 표현하기 까다로운 XML Style Tree구문 작성 돕는 문법
- 자바스크립트 표준(ECMAScript)구문이 아님

  - (babel) 트랜스파일러를 거쳐야 자바스크립트 런타임에서 실행되는 코드로 변환됨

- HTML 과 구분 위해 대문자료 시작

- `JSXElement`: JSX 가장 기본 구성 요소, (similar to HTML)

  1. `JSXOpeningElement`, `JSXClosingElement` : (`<JSXElement JSXAttributes></JSXElement>`)
     - `JSXAttributes`, `JSXChildren` 은 선택사항
  2. `JSXSelfClosingElement` : 요소 스스로 종료 (`<JSXElement JSXAttributes />`)
  3. `JSXFragment` : </> 단독 사용불가능 (`<>{JSXChildren}</>`)

  - `JSXElementName`: 요소 이름으로 사용 가능
  - `JSXIdenetifier`: JSX내부에서 사용할 수 있는 식별자

- `JSXAttributes`: `JSXElement`에 부여할 수 있는 속성 (없어도 에러 발생 X => 필수X)

  - `JSXSpreadAttributes` - JS의 전개 연산자와 동일 역할

    ```js
    <JSXElement {...AssignmentExpression} />
    ```

  - `AssignmentExpression`: 객체, 조건문 표현식, 화살표 함수, 할당식 등 모든 표현식 가능
  - `JSXAttributeName`: `JSXAttributeValue` : 속성을 나타내는 키-값 쌍으로 표현함

- `JSXChildren`: `JSXElement`의 자식 값

  - JSX는 속성을 가진 트리 구조를 나타내기 위해 만들어졌기 때문에 부모-자식 관계를 표현할 수 있음

- `JSXStrings`: 자바스크립트 코드 안에서 HTML 요소를 표현하는 방식

  - JSX는 XML과 유사한 문법을 사용

- `@babel/plugin-transform-react-jsx` 플러그인을 통해 JSX 구문을 자바스크립트가 이해할 수 있는 형태로 변환한다.

## 2.2 가상 DOM과 React Fiber

---

### 2.2.1 DOM 과 브라우저 렌더링 과정

- DOM + CSSOM $$\rightarrow$$ Render Tree

1. 브라우저가 사용자가 요청한 주소를 방문해 HTML파일을 다운로드 한다

   - 브라우저의 렌더링 엔진: HTML 파싱 $$\longrightarrow$$ create DOM TREE

2. CSS 파일도 보이면 해당 CSS 파일도 다운
   - 브라우저의 렌더링 엔진: CSS 파싱 $$\longrightarrow$$ create CSSOM TREE
3. (2)의 DOM 노드 순회 중 사용자가 눈에 보이는 노드만 방문 (ex: `display: none`은 방문 X)
4. 해당 노드에 대한 CSSOM 정보 찾고 노드에 적용.

   - a) <fontcolor>Layout (reflow)</fontcolor>: 각 노드가 브라우저 화면의 어느 좌표에 나타나야 하는지 계산하는 과정
   - b) <fontcolor>Painting</fontcolor> : 레이아웃 단계를 거친 노드에 색과 같은 유효한 모습을 그리는 과정

[Render Tree Construction](https://web.dev/articles/critical-rendering-path/render-tree-construction)

1. DOM and CSSOM trees combine to form render tree
2. Render tree contains only the nodes required to render the page
3. Layout computes the exact position and size of each object
4. Painting phase takes final render tree nad renders the pixels to screen

### 2.2.2 Virtual DOM

> 모든 렌더링 과정을 브라우저에서 하는 게 아닌 메모리에서 계산하고 최종 결과를 브라우저 DOM에 보여준다면, 렌더링 과정을 최소화하여 비용을 줄일 수 있고, 브라우저와 개발자의 부담을 덜 수 있다.

- 브라우저가 웹페이지를 렌더링하는 과정은 매우 복잡하고 많은 비용이 든다

  - interaction 추가 -> changes DOM AFTER 렌더링
  - 특히 SPA에서는 하나의 페이지에서 계속해서 요소의 위치를 재계산 -> DOM 변경 비용 UP

- 변경사항 추적 대신 최종 결과물 하나만 확인 필요

- Virtual DOM: 웹페이지가 표시해야 할 DOM을 메모리에 저장

  - 실제 변경에 대한 준비가 완료되었을 때 실제 브라우저 DOM에 반영
  - DOM 계산을 브라우저가 아닌 메모리에서 계산하여, 실제로는 여러 번 발생했을 렌더링 과정을 최소화

- ⚠️ 가상 DOM이 일반 DOM을 관리하는 브라우저보다 빠른 것은 아님!
  - 대부분의 상황에서 웬만한 애플리케이션을 만들 수 있을 정도로 충분히 빠르다는 것

### 2.2.3 React Fiber: 가상 DOM을 위한 아키텍쳐

평범한 JS Object임
