---
layout: post
title: Routing and Page Rendering
description: >
  라우팅 및 페이지 렌더링 - 심층분석
categories: next
accent_color: "#FFF"
accent_image:
  background: "#000"
theme_color: "#000"
sitemap: false
permalink: /frontend/next/routing
---

- `app/icon.jpg` $$\rightarrow$$ 즉시 favicon으로 사용
- 모든 page component 에 암묵적으로 들어가는 Param 있음 -> 동적 라우팅 가능

### ∥ Parallel Routes

> 병렬 라우트

- `@` 처리

```
archive/
├── @latest/
│   └── page.ts
├── @archive/
│   ├── page.ts
│   └── [slug]/
│       └── page.ts
└── layout.ts
```

- 자동으로 layout param으로 들어감 !

  ```js
  const ArchiveLayout({archive, layout}) => {
    return (
      <>
        {archive}
        {latest}
      </>
    )
  }
  ```

  - 문제: `/archive/1211` 불가 (latest > [slug]가 없음)
  - 해결: `latest/default.ts`
    - 병렬 라우팅 되더라도 얘 보여줌 (no matter which slug)

### 🎣 Catch-All Routing

- layout에 navbar 넣는 대신 이거 해도 좋음

```
archive/
├── @archive/
│   ├── [[...filter]] <<<<<<<<<----- Catch-all
│   │    └── page.ts
└── layout.ts
```

- catches **ALL** params after archive/
  - `archive/`, `archive/2024`, `archive/2024/12112`

### Error.tsx

- 잘못된 url 입력해서 params에서 감지 불가 시, `throw Error`을 한다고 하자
- Error.ts 파일을 생성해두면 해당 컴포넌트가 렌더링 됨 (에러 대신)

> ⚠️ 반드시 "use client"로 만들 것
> error may work on both ends, (client components works on both ends) => error fallback must be availabe on both sides

---

#### Revisiting Server vs Client Components

| React Server Components (RSC) | Client Components                               |
| ----------------------------- | ----------------------------------------------- |
| ONLY rendered on server       | pre-rendered in server, <br/> client에서도 가능 |
| default in NEXTJS             |                                                 |

- `error.ts`, `usePathName()` 같은 훅 사용하려면 "use client"로 해서 client component로 변경해야 함
- 최대한 further down the tree로...

### Nested Dynamic Routing, Intercepting

- `posts/[id]/images` 요런거 가능

- Intercepting Routes
  - parellel 라우팅 사용 시 유용함 (모달 vs full screen)
